<% content_for :page_id do %>topics_listing<% end %>
<% content_for :page_title do %>
  <%= app_config.title %> | <%= messageboard.title %> | Recent Topics
<% end %>

<header>
  <nav>
    <ul class="breadcrumbs">
      <li><a href="/">Forums</a></li>
      <li><span><%= messageboard.title %></span></li>
    </ul>
  </nav>
  <%= render partial: 'shared/currently_online' %>
  <%= render partial: 'shared/topic_nav' %>
</header>

  <section class="topics">
    <% if @sticky.first %>
      <% cache(['sticky_topic_list', @sticky.first, @tracked_user_reads.first]) do %>
        <div class="stuck">
          <%= render partial: 'topics/topic_condensed',
            collection: @sticky, as: :t %>
        </div>
      <%- end -%>
    <%- end -%>

    <% if @topics.first %>
      <% cache(['public_topic_list', @topics.first, @tracked_user_reads.first]) do %>
        <div class="currently">
          <%= render partial: 'topics/topic_condensed',
            collection: @topics, as: :t %>
        </div>
      <% end -%>
    <% end -%>
  </section>

<footer>
  <%= paginate @topics %>
  <nav>
    <%- if messageboard.postable_by?(current_user) -%>
      <ul class="actions">
        <li><%= link_to 'Create a New Topic',
          new_messageboard_topic_path(messageboard) %></li>
      </ul>
    <%- end -%>
    <ul class="breadcrumbs">
      <li><a href="/">Forums</a></li>
      <li><span><%= messageboard.title %></span></li>
    </ul>
  </nav>
</footer>
